---
layout: post
title: shell 脚本开发基础总结
date: 2017-09-11
tags: [shell, Linux, 教程]
---
## shell 中的正则表达式用法 ##
    ^abc 开始标记
    [^abc] 非(在[]内)
    abc$ 结束标记
    \ 转义字符
    a.c 单个任意字符
    \<abc 匹配单词开始
    abc\> 匹配单词结束
    AAA|BBB 或
    ? 匹配前一个字符0次或者1次 abc?
    * 匹配前一个字符>=0次 abc*
    + 匹配前一个字符>=1次 abc+
    {m}{m,n}{m,}{,n} 匹配前一个字符m次，m到n次，>=m次， =<n次  abc\{3,5\}
    [] 范围内选其一，比较特殊的：[0-9]代表数字 [a-z]代表小写字母 [A-Z]代表大写字母 m[abc]p， m[1-9]p
    () 将候选的所有元素放在()内，用|隔开
    # 不到万不得已不要用 管道 比价耗费资源

## 常用字符串处理指令 ##
    sed '匹配条件执行动作' /etc/host
    sed 's/old/new/g'
    ifconfig | grep 'int addr:' |grep -v '127.0.0.1' | sed 's/int addr://g' | sed继续处理
    awk -F: '{print $1 $2}' /etc/passwd
    
## 变量的使用 ##
    1 、环境变量=> 用户环境变量(cat ~/.bash_profile)   系统环境变量(/etc/profile) set 命令看所有环境变量
    2 、位置变量和shell脚本配合使用:
        $0
        $1 $2 $3
    3 、预定义变量
        $0 保存当前进程或者脚本的名称
        $! 后台运行的最后一个进程的pid号
        $? 表示程序退出的代表(一般0代表成功，非0代表执行失败)即上一条命令是否执行成功?
        $* 表示所有参数内容(整体)
        $$ 代表当前进程的ID号码
        $# 代表当前shell的参数个数
        $@ 代表所有参数内容(逐个读取)
        
## 算数运算 ##
    $((5+4)))=$[5+4] 两个小括号等于一个中括号
    expr 5 / 4 注意有空格
    
## 内置判定 ##
    test 2 -lt 3 等价于 [ 2 -lt 3 ] 返回0表示成立 返回1表示不成功
    echo $?
    字串测试(放在中括号里才有意义)
    = 等于则为真
    != 不等于则为真
    -z 字串长度伪则为真
    -n 字串长度不伪则为真
    文件测试(放在中括号里才有意义)
    -e 文件名 如果文件存在则为真
    -r 文件名 如果文件存在且可读则为真
    -w 文件名 如果文件存在且可写则为真
    -x 文件名 如果文件存在且可执行则为真
    -f 文件名 如果文件存在且为普通文件则为真
    -d 文件名 如果文件存在且为目录则为真
    -s 文件名 如果文件存在且至少有一个字符则为真
    -c 文件名 如果文件存在且为字符型特殊文件则为真
    -b 文件名 如果文件存在且为块特殊文件则为真
    逻辑判定： 与(!)、或(-o)、非(-a)三个逻辑操作符 用于将测试条件连接起来，其有限顺序为: !最高 -a其次 -o最低
    
## 日期处理 ##
    date +"%Y-%m-%d" 2009-12-07
    date -d "1 day ago" +"%Y-%m-%d"
    2秒后输出 date -d "2 second" +"%Y-%m-%d %H:%M.%S"
    传说中的 1234567890 秒： date -d "1970-01-01 1234567890 seconds" +"%Y-%m-%d %H:%m:%S"
    转格式 date -d "2009-12-12" +"%Y/%m/%d %H:%M.%S"
    date +%Y%m%d //显示前天年月日
    date -d "+1 day" +%Y%m%d //显示前一天的日期
    date -d "-1 day" +%Y%m%d //显示后一天的日期
    date -d "-1 month" +%Y%m%d //显示上一月的日期
    date -d "+1 month" +%Y%m%d //显示下一月的日期
    date -d "-1 year" +%Y%m%d //显示前一年的日期
    date -d "+1 year" +%Y%m%d //显示下一年的日期
    
## 计划任务 ##
    at 一次性的计划任务
    contab 周期性计划任务

<br/>

> [原始链接]({{page.url}}) 版权声明：自由转载-非商用-非衍生-保持署名 \| [Creative Commons BY-NC-ND 4.0](http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh)